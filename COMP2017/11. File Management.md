- File
	- a named collection of program instructions and/or data
- File Attributes
	- File name
	- File identifier
	- File size
	- Date and time of last modified
	- Type
	- Location
	- Access control
- File Operations
	- Create a file
	- Open and close a file
	- Read and write a file
	- Delete a file
	- Rename a file
	- Append new information to the end of an existing file

- File Access Methods
	- Sequential Access
		- accesses the file content sequentially
	- Indexed Sequential Access
		- A file
			- consists of sequentially organized data
		- An index file 
			- contains pointers to different parts of this file
	- Partitioned Access
		- A file is divided into partitions
			- each partition holds one sub-file
		- a header records the pointer to each partition
	- Direct Access
		- directly access any part of a file
		- Microsoft NTFS supports direct access

- Directory Structures
	- A volume
		- a logical disk
		- has a directory for recording the information of all files in it
	- Tree-Structured Directory
		- the directory can contain files and sub-directories
		- In Microsoft Windows, directory is called folder
	- Acyclic-Graph Directory
		- In multi-user OS
			- multiple users can share certain sub-directories

- Access Control
	- In a multi-user system, a user may allow another user to access his/her files in a controlled manner
	- Common access control
		- read, write execute, list, delete
	- **Direct Access Control**
		- maintains an access control list for each file/directory
			- specifies the access right for each user
		- Merit
			- Users can precisely specify the necessary access control
		- Demerit
			- It is troublesome to create one table for each file
	- **Simplified Access Control**
		- three user classifications
			- Owner
				- who creates the file/directory
			- Group
				- who share the file/directory
			- Universe
				- All other users
		- In Unix, ten bits are used for each file or directory
			- d r w x r w x r w x 

- File Allocation Methods
	- After formating, a hard disk divides the space into fixed-size blocks
		- each block has a block number
	- **Contiguous Allocation**
		- allocates contiguous blocks to store each file
		- maintains a file allocation table
			- start block
				- block number of the first block
			- length
				- total number of blocks
		- Merit
			- File access is faster
		- Demerit
			- large overhead to compact storage holes or relocate files
	- **Linked Allocation**
		- Each file is stored in a linked list of blocks
			- each block contains 
				- file content
				- a pointer to the next block
		- file allocation table records
			- start block
			- length
		- Merit
			- can allocate any free blocks to store a file flexibly
		- Demerit
			- does not support direct access
	- **Indexed Allocation**
		- For each file, the OS uses an index block
			- record where the file is stored
		- **Index Allocation with Block Portions**
			- The OS uses one index block to record the index information
			- The OS records the location of the index block in th File Allocation Table
		- **Index Allocation with Variable-Length Portions**
			- As far as possible, the OS allocates consecutive blocks to store a file in order to speed up file access.
			- the OS stores two numbers for every sequence of consecutive blocks
					- Block number of the start block
				- Number of blocks in this sequence
		- **Microsoft NTFS**
			- master file table
				- records the index information of every file
			- supports direct access
				- get the index information "1, 3, 8, 2"
				- restores the sequence of blocks "1→2→3→8→9"

- Free Space Management
	- Method 1: Bit Vector
		- is adopted by Microsoft NTFS
		- use one bit to record the availability of a block
			- 1
				- the block is free
			- 0
				- otherwise
		- bit vector
			- N bits used to record availability of N blocks
	- Method 2: Linked List
		- All the free blocks form a linked list
		- the OS records the block number of the first block in this linked

- Microsoft Windows
	- most files have large sizes
		- adopting a larger block size (8 KB)
			- merit
				- faster file access
			- demerit
				- more space wasted

- Microsoft NTFS
	- delete a file
		- delete the corresponding row in the master file table
		- update the corresponding availability bits to release the occupied blocks
	- block availability bit vector is corrupted
		- based on the index info of every file in the master file table
		- reconstruct the availability bit vector



