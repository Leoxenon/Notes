# Heaps and Heapsort
- Priority Queues
	- Finding or removing the smallest element is fast
		- insert
		- deleteMin
	- Implementation
		- Linked List
			- Insertion: O(1)
			- Find the minimum element: O(N)
			- Deletion: O(N)
		- Binary Search Tree
			- Insertion: O(logN)
			- Deletion: O(logN)
			- Search tree is an overkill as it does many other operations
		- Binary heaps (Heaps)
			- almost complete binary trees
			- all level are full
				- if the lowest level is not full, node must be packed to the left
			- A heap of height h has $2^h$ to ($2^{h+1} - 1$) nodes
			- Min-heap
				- The value at any node should be smaller than or equal to all of its descendants
				- the node with minimum value is at the root
		- Array Implementation
			- "tree-like" arrangement
				- level by level
				- left to right
				- left child
					- parent index * 2
				- right child
					- parent index * 2 + 1
				- parent
					- (int) (child index / 2)
				- index 0 stores the heap size
		- Heap Operations
			- Insertion
				- add to the lowest level
				- if violate min-heap property
					- percolate up
						- bubble up
				- O(logN)
			- DeleteMin
				- remove the root
				- place the last item in the heap into the root
				- percolate down
					- restore the heap order property by bubble down

## **Tutorial**
![[COMP2015/5.png/Tutorial 1.png]]

![[COMP2015/5.png/Tutorial 2.png]]

![[COMP2015/5.png/Tutorial 3.png]]
![[COMP2015/5.png/Tutorial 4.png]]

- BuildHeap
	- iterate from element (int)(size/2) to element 1
	- percolate down element i, making the subtree rooted at i a heap

![[COMP2015/5.png/Tutorial 5.png]]

![[COMP2015/5.png/Tutorial 6.png]]

- d-Heaps
	- all nodes have d children
	- locate the current minimum: O(1)
	- delete the current minimum: O(logN)

- Heapsort
	- build a binary heap of N elements
	- perform N - 1 DeleteMin operations
	- record these elements
	- Heapsort: no extra storage
		- After each deleteMin, the size of heap shrinks by 1
			- use the last cell just freed up to store the element that was just deleted
		- to sort in descending order
			- min heap
		- to sort in ascending order
			- max heap